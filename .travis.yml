sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: V5nlbHXCBldXWMUDpm5tkojbfE9ISdtcGdHXj0A/mtqgEz0d9mPeg+s9m8mLYimJHz9buBOHq602k+5rxfUbxmdM56fZYJrm/hyeb4qjpuADQOoI+W0dOh2qv7ubek8BEHPKFJzirZjAGZVTUN6OMIEOenBImWYBZ29jb010Vc+zQ/tjkHMNjjh6gH+2E9+Uwg3PMHP5upYfnZhPgbRqkX4RmtvOJZzUuKilfSLOb+pvc1LJGbDPDnw5E8mZ2IXzeap8YXOhvKfHEyU8KkCJaNhEJ9jrOK97jDSkIUOzS9fTNHIYdylwauWTYVCLE3zk/TN+PCBbAPO4Gr7qQmTl0ho+ZpndyI93q9KdXdKLrE9N2MBEKz9Pek62WQVdODAw9/n2h1pNYON9P25mJNdG/k7puDOUkZcNnC1B29sSNKpBWgJwFtlssxrRtT7urXr/RBO2gw79OgVt5gZw2VBTu/3jFg3YBxcATj2qmprpO/LhBR2i+mnrHc0XAQiw3uqBeaLy03AzzFJVP39q6I5MdTezMw0wsUZAhGm9wf9CYSrxC1BpQTKGr9VbPoOVHLX7g7owIlFWvYKiQg5uITHKJbaPUwgqZ1lGNQ2sWnVSCUcgWUG5wdNxk142y+SPHkMjN0pu8DPwilJdNc0UZvurhwN+BfPa8DAlo8QWOdh15/Y=
  - secure: 0svSZvjDpE6aZvJuRRzRKXmjVwq8Op3OKUXnGvSj1NxMa4ZPkzDSH26EbivIS4CJhDNMI+q0XzIdFRYd2nPTciS7PlyF8HzGYZnkTb/7CGmG+sZcniiDZKX0pSx72KDptmkh5L67X0/krK4Wj0lRncIkWN4fZn3OYLrP9Q5XCVB0ebPLD8Eh5XmEV+sTR0/O8cF4IIJ7L6oyumTwU/SlCm4MEco4EeoKN62iMbY/HWMjkVm9T8WQJ4GH6O5PewVft/+V4E7ADK0SQ9eJQxhoOH8BSRITUUloA0fvQnjL+9BaqZGdMGYIyYXP6U3M+smZD1OrEOnRkaJJdahGwy/28GY/oWb/MmsbKU1qGr/BWHiA9G2UyhWLn2g3tFJBW3HMO2Oi3z7IhLwioe2KYH7eR6Ikk23UqlAxgRZO80DqVwl7YluR8fAx8A+TqEIlK+KQGfupqay+LqNDMUEUfwzOMFGMXZvFX8I8ffA/gwtftn+z97MpvSjHhmb919brOOQ7juVoYw8CL5qptKegaZ+CM/waDLivNDPLiSXk0eofVTwBhg6seXic55ZIEAxJVuW+ix3r4yoeseXBf07ENMX2nqFxKMv5re0VFrUpivGtOPLpVzqanfp3UdvMUq1GlsQwXcHsBgR8D9IwvM1Wr/x74X5unqzuJ3TvbocYJOpA178=
